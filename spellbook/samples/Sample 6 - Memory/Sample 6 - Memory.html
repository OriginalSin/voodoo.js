<!doctype html>
<html>

<head>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <meta content="utf-8" http-equiv="encoding">
 
	<title>Memory Demo</title>
</head>

<style>
	.container {
		margin-left: auto;
		margin-right: auto;
		width: 1000px;
	}

	.block {
		width: 200px;
		height: 200px;
		display: inline-block;
	}
</style>

<script src="../../lib/three.min.js"></script>
<script src="../../lib/voodoo.min.js"></script>
<script src="../../lib/spellbook.min.debug.js"></script>

<body>
		<button onclick="createImage3Ds()">Create 50 Image3Ds</button>
		<button onclick="createModel3Ds()">Create 50 Model3Ds</button>
</body>

<script type="text/javascript">

	new voodoo.Engine({
		performanceScaling: false,
		standardLighting: false
	});

	new voodoo.MouseLight();

	function createImage3Ds() {
		for (var y = 0, height = 10; y < height; ++y) {
			var container = document.createElement('div');
			container.className = 'container';
			document.body.appendChild(container);

			for (var x = 0, width = 5; x < width; ++x) {
				var div = document.createElement('div');
				div.className = 'block';
				container.appendChild(div);

				var img3d = new voodoo.Image3D({
					element: div,
					heightmap: 'Italy-depth.jpg',
					imageSrc: 'Italy.jpg',
					geometryStyle: 'smooth',
					maxHeight: 200
				});
			}	
		}
	}

	function createModel3Ds() {
		var CustomModel3D = voodoo.Autofit.extend(voodoo.Model3D);
		CustomModel3D = voodoo.Attachable.extend(CustomModel3D);

		for (var y = 0, height = 10; y < height; ++y) {
			var container = document.createElement('div');
			container.className = 'container';
			document.body.appendChild(container);

			for (var x = 0, width = 5; x < width; ++x) {
				var div = document.createElement('div');
				div.className = 'block';
				container.appendChild(div);

				var model3D = new CustomModel3D({
					element: div,
					modelSrc: 'monster.js',
					center: true,
					pixelScale: false,
					animated: true
				});
			}	
		}
	}

</script>

</html>