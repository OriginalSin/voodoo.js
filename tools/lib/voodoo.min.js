'use strict';var e=!0,h=null,p=!1;function y(){return function(){}}
(function(g,z){function $(){function B(a){this.cc=a||"voodoo";this.od="["+this.cc+"]"}function J(a,b){this.width=a;this.height=b}function K(a,b){this.x=a;this.y=b}function ea(){Object.defineProperty(this,"disableStencils",{get:function(){return p},set:function(){C.v("Debug settings may only be set in debug builds.","(Debug::disableStencils)")},enumerable:e});Object.defineProperty(this,"drawStencils",{get:function(){return p},set:function(){C.v("Debug settings may only be set in debug builds.","(Debug::drawStencils)")},
enumerable:e});Object.defineProperty(this,"showFps",{get:function(){return p},set:function(){C.v("Debug settings may only be set in debug builds.","(Debug::showFps)")},enumerable:e})}function O(){this.vc={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",
coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",
dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",
lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",
midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",
salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}function G(){var a=this.extendableMethodStack,b;for(b in a)if(a.hasOwnProperty(b)){var c=
a[b];this[b]===c.$[c.H]&&--c.H}this.base.Jc=this;this.construct.apply(this,arguments)}function Z(a){var b=a[0],c=this,d;for(d in b)try{"function"===typeof b[d]&&(c[d]=function(a,b){return function(){for(var d,f=0,k=b.length;f<k;++f)d=b[f],d=d[a].apply(d,arguments);return d===b[b.length-1]?c:d}}(d,a))}catch(f){}}function x(a,b,c,d,f,n){this.ac=a;this.j=b;this.d=c;this.fc=d;this.wa=f;this.Cb=n;this.P=[]}function L(a){this.M=a}function P(){this.M={}}function aa(){this.fa=p;this.ob=this.ab=0;this.N=z.createElement("div");
var a=this.N.style;a.position="fixed";a.zIndex=999999999;a.left="0px";a.top="0px";a.backgroundColor="black";a.color="lime";a.fontStyle="bold";a.fontSize="200%";a.fontFamily="sans-serif";this.N.display="none";var b=this;this.Bc=setInterval(function(){b.bb=b.ab;b.Xc=b.ob;b.ab=0;b.ob=0},1E3)}function M(){}function D(){}function $(){}function F(){}function ba(a){this.Ba=a;this.Kc=0;this.ga={};this.Ha=this.Ia=this.Ka=this.Ja=Number.MIN_VALUE;this.m()}function fa(){this.ua={};this.Lc=this.Mc=0;this.vb=
{}}function Q(){this.ia={};this.gb=0}function R(a,b,c,d){this.q=a;this.la=b;this.Va="undefined"===typeof d?-1:d;this.f=c;this.l=a.model}function X(){}function ha(){}function ia(){}function H(a){this.e=a;this.Pb();this.e.pa.rb(new K(0,0));this.nc();var b=this;this.e.on("removemodel",function(a){b.i&&a.model===b.i.l&&(b.i=h);if(b.S)for(var d=0;3>d;++d){var f=b.S[d];f&&a.model===f.l&&(b.S[d]=h)}if(b.Y)for(d=0;3>d;++d)(f=b.Y[d])&&a.model===f.l&&(b.Y[d]=h)})}function A(a,b,c,d){this.d=new THREE.Camera;
this.cb=new THREE.Frustum;this.Db=a;this.Ca=b;this.K=c;this.Q=d;this.Ic();this.zc()}function S(a){this.e=a;this.j=a.j;this.dc=new THREE.Projector}function E(a,b){this.h=a;this.q=b;this.J=g.voodoo.engine.J;this.ta=h;this.f=new THREE.Object3D;this.h.add(this.f);this.ma=[];this.ka=[];this.a=new Q;var c=this;Object.defineProperty(this,"objects",{get:function(){for(var a=[],b=c.f.children,n=0,q=b.length;n<q;++n){var t=b[n];t.addedToVoodooScene&&a.push(t)}return a},enumerable:e})}function N(){this.h=new THREE.Scene}
function ca(a,b,c){this.p=a;this.h=b;this.q=c}function T(){this.p=[]}function w(a){this.e=a;this.Z=[];this.kd();this.xc();this.yc();this.Sc();this.e.c.performanceScaling?(this.da=new aa,this.Yb=new Date,this.bc=p):this.da=h}function v(a){a=new m(a);for(var b in a);this.c=a;this.ld();this.eb=new P;this.J=new fa;this.I=[];var c=this;Object.defineProperty(this,"models",{get:function(){return c.I.slice(0)},enumerable:e});this.cd();switch(a.renderer){case ja.ThreeJs:this.j=new w(this);this.pa=new S(this);
break;default:this.pa=this.j=h,C.v("Unsupported renderer","(Engine::Engine)")}this.a=new Q;this.Na=new H(this);g.voodoo.engine=this;a.standardLighting&&(new ka({color:"white"}),new ga({color:"white"}));this.Sa=this.Ta=this.Wa=-1;b=0===this.c.updateInterval;var d=0===this.c.renderInterval;a.frameLoop&&((b||d)&&this.ec(b,d),b||(this.Wa=g.setInterval(function(){c.m()},this.c.updateInterval)),d||(this.Ta=g.setInterval(function(){c.j.U()},this.c.renderInterval)))}function m(a){if(a)for(var b in a)this[b]=
a[b]}B.prototype.Gc=y();B.prototype.l=function(a,b){var c=Array.prototype.slice.call(arguments,1);c.unshift(a.privateModelProperties.id);this.Gc.apply(this,c)};B.prototype.v=function(a){var b=Array.prototype.slice.call(arguments);b.unshift("**ERROR**");throw{name:this.cc+" exception",message:b.join(" "),toString:function(){return this.name+": "+this.message}};};var C=new B("voodoo");J.prototype.width=0;J.prototype.height=0;K.prototype.x=0;K.prototype.y=0;ea.prototype.disableStencils=p;ea.prototype.drawStencils=
p;ea.prototype.showFps=p;this.debug=new ea;O.prototype.convertCssColorToThreeJsColor=function(a){a=a.toLowerCase();return"#"===a[0]?this.Fb(a):0===a.indexOf("rgb(")?(a=a.substring(4,a.length-1).split(","),this.Gb(a[0],a[1],a[2])):0===a.indexOf("rgba(")?(a=a.substring(5,a.length-1).split(","),this.Gb(a[0],a[1],a[2])):0===a.indexOf("hsl(")?(a=a.substring(4,a.length-1).split(","),this.Eb(a[0],a[1],a[2])):0===a.indexOf("hsla(")?(a=a.substring(5,a.length-1).split(","),this.Eb(a[0],a[1],a[2])):this.wc(a)};
O.prototype.findAbsolutePosition=function(a){var b=0,c=0;if(a.offsetParent){do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}return{x:b,y:c}};O.prototype.Fb=function(a){return new THREE.Color(parseInt("0x"+a.substring(1),16))};O.prototype.Gb=function(a,b,c){a=parseFloat(a)/255;b=parseFloat(b)/255;c=parseFloat(c)/255;return(new THREE.Color).setRGB(a,b,c)};O.prototype.Eb=function(a,b,c){a=parseFloat(a);b=parseFloat(b)/100;c=parseFloat(c)/100;b*=1-Math.abs(2*c-1);var d=a/60,f=b*(1-Math.abs(parseInt(d,
10)%2-1)),n=a=0,q=0;0<=d&&1>d?(a=b,n=f):1<=d&&2>d?(a=f,n=b):2<=d&&3>d?(n=b,q=f):3<=d&&4>d?(n=f,q=b):4<=d&&5>d?(a=f,q=b):5<=d&&6>d&&(a=b,q=f);c-=0.5*b;return(new THREE.Color).setRGB(a+c,n+c,q+c)};O.prototype.wc=function(a){return this.Fb(this.vc[a.toLowerCase()])};this.utility=new O;G.prototype.construct=function(){C.v("Extendable::construct not implemented","(Extendable::construct)")};G.prototype.base={};G.extend=function(a){function b(){G.apply(this,arguments)}function c(a,b,c){var d=a[b];d||(d=
a[b]={$:[],H:-1});a=d.$;a[d.H]!==c&&(a.push(c),++d.H)}function d(){var a=n.base={},b;for(b in g)if(g.hasOwnProperty(b)){var c=g[b];a[b]=function(a,b,c){return function(){if(0<=b.H){var d=b.H--;try{var f=c[d].apply(a.Jc,arguments)}catch(n){throw b.H=b.$.length-1,n;}++b.H;return f}}}(a,c,c.$)}}b.extend=G.extend;var f=this.prototype,n=b.prototype,q;for(q in f)f.hasOwnProperty(q)&&(n[q]=f[q]);var t=f.extendableMethodStack,g=n.extendableMethodStack={},k;for(k in t)if(t.hasOwnProperty(k)){var m=t[k];g[k]=
{$:m.$.slice(0),H:m.H}}for(k in f)t=f[k],"function"===typeof t&&f.hasOwnProperty(k)&&c(g,k,t);if(!a)return d(),b;"function"===typeof a&&(a=a.prototype);if(f=a.extendableMethodStack)for(k in f)if(f.hasOwnProperty(k))for(var t=f[k].$,m=0,s=t.length;m<s;++m)c(g,k,t[m]);for(q in a)a.hasOwnProperty(q)&&(k=a[q],k!==f&&("function"===typeof k&&c(g,q,k),n[q]=k));d();return b};this.Extendable=G;var I={Above:1,Below:2,BelowStencil:3,Seam:4,SeamStencil:5};x.prototype.pc=function(a){this.P.push(a)};x.prototype.ha=
function(){for(var a=0,b=this.P.length;a<b;++a)this.P[a].scene.s=p};x.prototype.X=function(){for(var a=this.d.cb,b=0,c=this.P.length;b<c;++b){var d=this.P[b],f=d.scene;if(d.loaded&&f.s){d=f.ka;if(d.length!==f.ma.length)return e;for(var f=0,n=d.length;f<n;++f){var q=d[f];if(q.geometry&&(q.updateMatrixWorld(e),a.intersectsObject(q)))return e}}}return p};x.prototype.Wc=function(a){this.P.splice(this.P.indexOf(a),1)};x.prototype.Cb=h;x.prototype.d=h;x.prototype.ac=h;x.prototype.j=h;x.prototype.fc=h;x.prototype.wa=
h;x.prototype.P=h;L.prototype["delete"]=function(a,b,c){delete this.Da(b,c)[a]};L.prototype.get=function(a,b,c){return this.Da(b,c)[a]};L.prototype.has=function(a,b,c){return this.Da(b,c).hasOwnProperty(a)};L.prototype.set=function(a,b,c,d){this.Da(c,d)[a]=b};L.prototype.Da=function(a,b){var c,d;a?(c=a,d=b||"*"):(c=this.Zb,d=this.$b);this.M.hasOwnProperty(d)||(this.M[d]={});d=this.M[d];d.hasOwnProperty(c)||(d[c]={});return d[c]};L.prototype.Zb="";L.prototype.$b="";P.prototype.Hb=function(a){var b=
new L(this.M);b.Zb=a.name;b.$b=a.organization;return b};var da=0,r=G.extend();r.prototype.cleanUp=function(){var a=this.base.cleanUp;"function"===typeof a&&a()};r.prototype.construct=function(a){!this.viewType.prototype.above&&!this.viewType.prototype.below&&C.v("View must exist on at least one layer.","(Model::Model)");this.stencilViewType=this.stencilViewType||this.viewType;var b=this.privateModelProperties={},c="<"+ ++da+",";"*"!==this.organization&&(c+=this.organization+".");c+=this.name+">";
b.id=c;C.l(this,"Constructing");c=g.voodoo;c.engine||(c.engine=new v(new m));c=c.engine;b.a=new Q;var d=b.M=c.eb.Hb(this);Object.defineProperty(this,"cache",{get:function(){return d},enumerable:e});this.initialize(a||{});a=b.P=[];var f=b.pd=[];b.Oa=0;b.Pa=0;Object.defineProperty(this,"loaded",{get:function(){return b.Oa===b.Pa},enumerable:e});for(var n=this.stencilViewType===this.viewType,q=this.viewType.prototype,t=q.above,q=q.below,la=c.j.Z,k=0,r=la.length;k<r;++k){var s=la[k];switch(s.ac){case I.Above:t&&
a.push(new this.viewType(this,s));break;case I.Below:q&&a.push(new this.viewType(this,s));break;case I.Seam:t&&a.push(new this.viewType(this,s));break;case I.BelowStencil:q&&(n?a.push(new this.viewType(this,s)):f.push(new this.stencilViewType(this,s)));break;case I.SeamStencil:q&&(n?a.push(new this.viewType(this,s)):f.push(new this.stencilViewType(this,s)))}}var n=a.length,t=f.length,l=b.q=1<n?new Z(a):a[0],u=b.hc=1<t?new Z(f):f[0];b.Pa=n+t;Object.defineProperty(this,"view",{get:function(){return l},
enumerable:e});Object.defineProperty(this,"stencilView",{get:function(){return u},enumerable:e});this.setUpViews();c.oc(this)};r.prototype.destroy=function(){C.l(this,"Destroying");var a=this.privateModelProperties,b=g.voodoo,c=new b.Event("destroy",this);a.a.k(this,c);this.tearDownViews();b.engine.Vc(this);b=a.q;c=a.hc;b&&b.destroy&&b.destroy();c&&c.destroy&&c.destroy();this.cleanUp();a.a.o();a.a=h;a.q=h;a.hc=h};r.prototype.dispatch=function(a){this.privateModelProperties.a.k(this,a);return this};
r.prototype.initialize=function(a){var b=this.base.initialize;"function"===typeof b&&b(a)};r.prototype.off=function(a,b){this.privateModelProperties.a.hb(a,b);return this};r.prototype.on=function(a,b){var c=this.privateModelProperties;c.a.ib(a,b);"load"===a&&c.Oa===c.Pa&&b.call(this,new g.voodoo.Event("load",this));return this};r.prototype.setUpViews=function(){var a=this.base.setUpViews;"function"===typeof a&&a()};r.prototype.tearDownViews=function(){var a=this.base.tearDownViews;"function"===typeof a&&
a()};r.prototype.update=function(a){var b=this.base.update;"function"===typeof b&&b(a)};r.prototype.cache=h;r.prototype.loaded=p;r.prototype.stencilView=h;r.prototype.view=h;r.prototype.onViewLoad=function(){var a=this.privateModelProperties;a.Oa++;if(a.Oa===a.Pa){var b=new g.voodoo.Event("load",this);a.a.k(this,b)}};r.prototype.name=h;r.prototype.organization="*";r.prototype.viewType=h;r.prototype.stencilViewType=h;r.extend=function(a){var b=G.extend.call(this,a),c=b.prototype,d=this.prototype,f=
d.name,n=c.name;f&&(n&&n!==f)&&(c.name=f+"."+n);n=d.viewType;f=c.viewType;n&&(f&&n!==f)&&(c.viewType=n.extend(f));d=d.stencilViewType||n;a=("function"===typeof a?a.prototype:a)||{};a=a.stencilViewType||f;d&&(a&&d!==a)&&(c.stencilViewType=d.extend(a));b.extend=r.extend;return b};this.Model=r;var u=G.extend();u.prototype.construct=function(a,b){var c=this.privateViewProperties={},d=this;Object.defineProperty(this,"cache",{get:function(){return c.M},enumerable:e});Object.defineProperty(this,"camera",
{get:function(){return c.La.d},enumerable:e});Object.defineProperty(this,"loaded",{get:function(){return c.Fa},set:function(a){c.Fa=a;if(c.Fa)c.l.onViewLoad(d)},enumerable:e});Object.defineProperty(this,"model",{get:function(){return c.l},enumerable:e});Object.defineProperty(this,"renderer",{get:function(){return c.La.j},enumerable:e});Object.defineProperty(this,"scene",{get:function(){return c.h},enumerable:e});Object.defineProperty(this,"triggers",{get:function(){return c.p},enumerable:e});c.l=
a;c.La=b;c.h=b.fc.Ib(this);c.p=b.wa.Jb(this);c.M=b.Cb.Hb(a);this.dirty();b.pc(this);c.Fa=e;this.load();if(c.Fa)a.onViewLoad(this)};u.prototype.destroy=function(){this.unload();var a=this.privateViewProperties;a.p.o();a.h.o();a.La.Wc(this);a.l=h;a.p=h;a.h=h;a.La=h;a.M=h};u.prototype.dirty=function(){this.privateViewProperties.h.s=e};u.prototype.load=function(){var a=this.base.load;"function"===typeof a&&a()};u.prototype.unload=function(){var a=this.base.unload;"function"===typeof a&&a()};u.prototype.above=
e;u.prototype.below=e;u.prototype.cache=h;u.prototype.camera=h;u.prototype.loaded=h;u.prototype.model=h;u.prototype.renderer=h;u.prototype.scene=h;u.prototype.triggers=h;u.extend=function(a){a=G.extend.call(this,a);var b=a.prototype,c=this.prototype;this!==u&&(b.above=b.above||c.above,b.below=b.below||c.below);a.extend=u.extend;return a};this.View=u;aa.prototype.o=function(){this.fa&&(this.N.display="none",z.body.removeChild(this.N),this.fa=p);g.clearInterval(this.Bc)};aa.prototype.Cc=function(){this.ab++;
g.voodoo.debug.showFps?(this.fa||(this.N.display="block",z.body.appendChild(this.N),this.fa=e),this.N.innerHTML="Frames/second: "+this.bb+", Renders/second: "+this.Xc):this.fa&&(this.N.display="none",z.body.removeChild(this.N),this.fa=p)};aa.prototype.U=function(){this.ob++};aa.prototype.bb=0;M.prototype.fovY=0;M.prototype.position={};M.prototype.position.x=0;M.prototype.position.y=0;M.prototype.position.z=0;M.prototype.zNear=0;M.prototype.zFar=0;D.prototype.add=y();D.prototype.attach=y();D.prototype.detach=
y();D.prototype.localToPage=function(){return{}};D.prototype.off=y();D.prototype.on=y();D.prototype.pageToLocal=function(){return{}};D.prototype.remove=y();D.prototype.objects=h;D.prototype.o=y();D.prototype.s=e;D.prototype.ma=h;D.prototype.ka=h;$.prototype.Ib=function(){C.v("createScene_() undefined.");return h};var ja={ThreeJs:0};this.Renderer=ja;F.prototype.Ya=y();F.prototype.o=y();F.prototype.U=y();F.prototype.qb=y();F.prototype.V=h;F.prototype.W=h;F.prototype.ca=h;F.prototype.qa=h;F.prototype.ra=
h;F.prototype.wb=h;ba.prototype.mc=function(a){var b=this.Kc++;this.ga[b]=a;this.fb++;a(this.Ja,this.Ka,this.Ia,this.Ha,e,e);return b};ba.prototype.Tc=function(a){delete this.ga[a];this.fb--};ba.prototype.m=function(){var a=g.voodoo.utility.findAbsolutePosition(this.Ba),b=this.Ba.offsetWidth,c=this.Ba.offsetHeight,d=a.x!==this.Ja||a.y!==this.Ka,f=b!==this.Ia||c!==this.Ha;if(d||f){this.Ja=a.x;this.Ka=a.y;this.Ia=b;this.Ha=c;for(var n in this.ga)this.ga.hasOwnProperty(n)&&this.ga[n].call(h,this.Ja,
this.Ka,this.Ia,this.Ha,d,f)}};ba.prototype.fb=0;fa.prototype.Ua=function(a,b){var c,d;a.hasOwnProperty("VoodooTrackedElementId")?(d=a.VoodooTrackedElementId,c=this.ua[d]):(d=a.VoodooTrackedElementId=this.Mc++,c=this.ua[d]=new ba(a));var f=c.mc(b),n=this.Lc++;this.vb[n]={gd:d,fd:c,uc:f};return n};fa.prototype.Uc=function(a){var b=this.vb[a],c=b.fd,d=b.gd,b=b.uc;delete this.vb[a];c.Tc(b);0===c.fb&&(delete this.ua[d],delete c.Ba.VoodooTrackedElementId)};fa.prototype.m=function(){for(var a in this.ua)this.ua[a].m()};
Q.prototype.o=function(){U.sa-=this.gb;this.ia=h};Q.prototype.k=function(a,b){var c=this.ia[b.type];if(c)for(var d=0,f=c.length;d<f;++d)c[d].call(a,b)};Q.prototype.hb=function(a,b){U.Rb(a)&&(U.sa--,this.gb--);var c=this.ia[a];c&&c.indexOf(b)&&c.splice(c.indexOf(b),1)};Q.prototype.ib=function(a,b){U.Rb(a)&&(U.sa++,this.gb++);var c=this.ia[a];c||(c=this.ia[a]=[]);-1===c.indexOf(b)&&c.push(b)};R.prototype.Ea=function(a){return!!a&&this.l===a.l&&this.Va===a.Va};R.prototype.l=h;R.prototype.la=h;R.prototype.f=
h;R.prototype.Va=-1;R.prototype.q=h;this.n=function(a,b,c){this.type=a;this.model=b;this.triggerId="undefined"===typeof c?-1:c};this.n.prototype.Hc=function(a,b,c,d,f,n){this.page.x=a;this.page.y=b;this.hit.x=c;this.hit.y=d;this.hit.z=f;this.button=n||0};this.n.prototype.button=0;this.n.prototype.hit={};this.n.prototype.hit.x=Number.MAX_VALUE;this.n.prototype.hit.y=Number.MAX_VALUE;this.n.prototype.hit.z=Number.MAX_VALUE;this.n.prototype.model=h;this.n.prototype.object=h;this.n.prototype.page={};
this.n.prototype.page.x=Number.MAX_VALUE;this.n.prototype.page.y=Number.MAX_VALUE;this.n.prototype.size={};this.n.prototype.size.x=Number.MAX_VALUE;this.n.prototype.size.y=Number.MAX_VALUE;this.n.prototype.type=h;this.n.prototype.triggerId=-1;this.Event=this.n;var U={sa:0,Rb:function(a){return"mouseup"===a||"mousedown"===a||"click"===a||"dblclick"===a||"mousemove"===a||"mouseover"===a||"mouseout"===a}};X.prototype.add=y();X.prototype.cursor=function(a){this.Kb=a};X.prototype.remove=y();X.prototype.o=
y();X.prototype.Kb="auto";ha.prototype.Jb=function(){C.v("createTriggers_() undefined.");return h};ha.prototype.p=h;ia.prototype.Ra=function(){C.v("raycast_() undefined.");return h};ia.prototype.rb=function(){C.v("setMouse_() undefined.")};H.prototype.nc=function(){var a=this;z.addEventListener("mousemove",function(b){a.Oc(b)},p);z.addEventListener("mousedown",function(b){a.Nc(b)},p);z.addEventListener("mouseup",function(b){a.Pc(b)},p)};H.prototype.o=function(){this.Pb();this.e=h};H.prototype.D=function(a,
b,c,d){a=b===h?new g.voodoo.Event(a,h):new g.voodoo.Event(a,b.l,b.Va);a.Hc(this.Za+g.pageXOffset,this.$a+g.pageYOffset,this.Vb,this.Wb,this.Xb,c);(d||b).l.dispatch(a)};H.prototype.Pb=function(){this.i=h;this.S=[h,h,h];this.Y=[h,h,h];this.nd=p;this.jb=[p,p,p];this.Qa=p;this.Xb=this.Wb=this.Vb=this.$a=this.Za=0;this.Ub=[h,h,h];this.Sb=[0,0,0];this.Tb=[0,0,0]};H.prototype.Nc=function(a){if(this.i!==h){a.preventDefault();var b=a.button,c=this.Y[b],d=new Date-this.Ub[b],f=this.S[b]=this.i;this.D("mousedown",
this.i,b);f.Ea(c)&&(this.Sb[b]===a.clientX&&this.Tb[b]===a.clientY&&d<=this.e.c.Ac)&&(this.jb[b]=e)}};H.prototype.Oc=function(a){this.i!==h&&a.preventDefault();this.Za=a.clientX;this.$a=a.clientY;this.Qa=e;this.e.c.realtime&&this.m()};H.prototype.Pc=function(a){var b=a.button;if(this.i){a.preventDefault();this.D("mouseup",this.i,b);var c=this.S[b],d=this.Y[b];c&&this.i!==c&&this.D("mouseup",this.i,b,c);this.i.Ea(c)&&(this.D("click",c,b),this.jb[b]&&c.Ea(d)?(this.Y[b]=h,this.jb[b]=p,this.D("dblclick",
c,b)):(this.Y[b]=c,this.Ub[b]=new Date,this.Sb[b]=a.clientX,this.Tb[b]=a.clientY))}else(c=this.S[b])&&this.D("mouseup",h,b,c);this.S[b]=h};H.prototype.Ra=function(){var a=this.e.pa.Ra();this.Vb=a.Dc;this.Wb=a.Ec;this.Xb=a.Fc;return a.va};H.prototype.m=function(){var a=this.e,b=a.pa,a=a.j;this.Qa&&b.rb(new K(this.Za,this.$a));if(!(0>=U.sa)){for(var b=this.Ra(),c=0;3>c;++c){var d=this.S[c];d&&b!==d&&this.D("mousemove",b,c,d)}b!==h?(this.Qa&&this.D("mousemove",b),b.Ea(this.i)||(this.i!==h&&this.D("mouseout",
this.i),this.D("mouseover",b)),a.Ya(e)):(this.i!==h&&this.D("mouseout",this.i),a.Ya(p));this.i=b;this.Qa=p;this.i!==h?a.qb(this.i.f.Kb):a.qb("auto")}};A.prototype=new M;A.prototype.zc=function(){var a=this;Object.defineProperty(this,"fovY",{get:function(){return a.Ca},enumerable:e});Object.defineProperty(this,"position",{get:function(){var b=a.d.position;return{x:b.x,y:b.y,z:b.z}},enumerable:e});Object.defineProperty(this,"zNear",{get:function(){return a.K},enumerable:e});Object.defineProperty(this,
"zFar",{get:function(){return this.Q},enumerable:e})};A.prototype.Ic=function(){this.oa=this.kb=this.lb=e;var a=this.d.up;a.x=0;a.y=-1;a.z=0;this.ea();this.m();var b=this;g.addEventListener("scroll",function(){b.na()},p);g.addEventListener("resize",function(){b.ea()},p);this.F=e};A.prototype.na=function(){this.lb=e};A.prototype.ea=function(){this.kb=e;this.na()};A.prototype.aa=function(a,b){this.K=a;this.Q=b;this.d.projectionMatrix.makePerspective(this.Ca,this.yb,this.K,this.Q);this.oa=e;this.m()};
A.prototype.m=function(){if(this.kb){var a=this.Db.style,b=parseInt(a.width,10),a=parseInt(a.height,10);this.yb=b/a;b=Math.tan(this.Ca/360*Math.PI);this.md=a/2/b;this.d.projectionMatrix.makePerspective(this.Ca,this.yb,this.K,this.Q);this.d.position.z=this.md;this.d.scale.x=-1;this.kb=p;this.oa=this.F=e}if(this.lb){var a=this.Db.style,b=parseInt(a.width,10),a=parseInt(a.height,10),c=this.d.position;c.x=b/2+g.pageXOffset;c.y=a/2+g.pageYOffset;this.d.lookAt(new THREE.Vector3(c.x,c.y,0));this.lb=p;this.oa=
this.F=e}this.oa&&(this.d.updateMatrixWorld(e),b=new THREE.Matrix4,b.getInverse(this.d.matrixWorld),this.cb.setFromMatrix((new THREE.Matrix4).multiplyMatrices(this.d.projectionMatrix,b)),this.oa=p)};A.prototype.d=h;A.prototype.cb=h;A.prototype.F=p;S.prototype=new ia;S.prototype.Lb=function(a,b){for(var c=this.j.V.wa.p,d=0,f=c.length;d<f;++d){var n=c[d],q=n.l,t=this.kc.intersectObject(n.la,e);if(!(0>=t.length)){var g=t[0],t=g.distance,g=g.point;if(!(0>=t||t>=a.Aa)){var k=this.e.c;if(!k.belowLayer||
!(0>g.z&&n.q.below&&k.stencils&&q.viewType!==q.stencilViewType&&-1===b.indexOf(q)))a.Aa=t,a.va=n,a.nb=g}}}return a};S.prototype.Mb=function(a,b){for(var c=this.j.W.wa.p,d=0,f=c.length;d<f;++d){var n=c[d],q=n.l,g=n.la,m=this.e.c;if(!m.aboveLayer||!q.view.above)if(g=this.zb.intersectObject(g,e),!(0>=g.length)){var k=g[0],g=k.point,k=k.distance;if(!(0<=g.z)&&!(0>=k||k>=a.Aa))if(!m.stencils||!(q.viewType!==q.stencilViewType&&-1===b.indexOf(q)))a.Aa=k,a.va=n,a.nb=g}}return a};S.prototype.Nb=function(){for(var a=
[],b=this.j.ca.wa.p,c=0,d=b.length;c<d;++c){var f=b[c],n=f.la,g=f.l;g.viewType!==g.stencilViewType&&f.q.below&&-1===b.indexOf(g)&&0<this.zb.intersectObject(n,e).length&&a.push(g)}return a};S.prototype.Ra=function(){var a={Aa:Number.MAX_VALUE,va:h,nb:h},b=this.e.c,c=b.belowLayer,d=b.aboveLayer;c&&d?(b=b.stencils?this.Nb():[],a=this.Lb(a,b),a=this.Mb(a,b)):d?a=this.Lb(a,[]):c&&(b=this.Nb(),a=this.Mb(a,b));b=a.nb;return{va:a.va,Dc:b?b.x:Number.MAX_VALUE,Ec:b?b.y:Number.MAX_VALUE,Fc:b?b.z:Number.MAX_VALUE}};
S.prototype.rb=function(a){var b=this.j.wb,c=2*(a.x/b.width)-1;a=2*-(a.y/b.height)+1;this.e.c.aboveLayer&&(b=this.j.V.d.d,this.xa=new THREE.Vector3(c,a,1),this.dc.unprojectVector(this.xa,b),this.xa=this.xa.sub(b.position).normalize(),this.kc=new THREE.Raycaster(b.position,this.xa));this.e.c.belowLayer&&(b=this.j.W.d.d,this.ya=new THREE.Vector3(c,a,1),this.dc.unprojectVector(this.ya,b),this.ya=this.ya.sub(b.position).normalize(),this.zb=new THREE.Raycaster(b.position,this.ya))};E.prototype=new D;E.prototype.add=
function(a){a.addedToVoodooTriggers?a.visible=e:this.f.add(a);a.addedToVoodooScene=e;this.ma.push(a);this.Qb(a)&&this.ka.push(a);this.s=e;var b=new g.voodoo.Event("add");b.object=a;this.a.k(this.q,b)};E.prototype.attach=function(a,b,c){b="undefined"!==typeof b?b:e;c="undefined"!==typeof c?c:e;this.ta!==h&&this.detach();var d=g.voodoo.Event,f=this;a&&(this.ta=b?c?this.J.Ua(a,function(b,c,g,m,k,r){var s=f.f,l=s.position,s=s.scale;l.x=b+g/2;l.y=c+m/2;s.x=s.y=1;f.f.updateMatrixWorld(e);f.s=e;k&&(k=new d("move"),
k.object=a,l=k.page,l.x=b,l.y=c,l=k.size,l.x=g,l.y=m,f.a.k(h,k));r&&(k=new d("resize"),k.object=a,l=k.page,l.x=b,l.y=c,l=k.size,l.x=g,l.y=m,f.a.k(h,k))}):this.J.Ua(a,function(b,c,g,m,k,r){var s=f.f,l=s.position,s=s.scale;l.x=b+g/2;l.y=c+m/2;s.x=g;s.y=m;f.f.updateMatrixWorld(e);f.s=e;k&&(k=new d("move"),k.object=a,l=k.page,l.x=b,l.y=c,l=k.size,l.x=g,l.y=m,f.a.k(h,k));r&&(k=new d("resize"),k.object=a,l=k.page,l.x=b,l.y=c,l=k.size,l.x=g,l.y=m,f.a.k(h,k))}):c?this.J.Ua(a,function(b,c,g,m,k,r){var s=f.f,
l=s.position,s=s.scale;l.x=b;l.y=c;s.x=s.y=1;f.f.updateMatrixWorld(e);f.s=e;k&&(k=new d("move"),k.object=a,l=k.page,l.x=b,l.y=c,l=k.size,l.x=g,l.y=m,f.a.k(h,k));r&&(k=new d("resize"),k.object=a,l=k.page,l.x=b,l.y=c,l=k.size,l.x=g,l.y=m,f.a.k(h,k))}):this.J.Ua(a,function(b,c,g,m,k,r){var s=f.f,l=s.position,s=s.scale;l.x=b;l.y=c;s.x=g;s.y=m;f.f.updateMatrixWorld(e);f.s=e;k&&(k=new d("move"),k.object=a,l=k.page,l.x=b,l.y=c,l=k.size,l.x=g,l.y=m,f.a.k(h,k));r&&(k=new d("resize"),k.object=a,l=k.page,l.x=
b,l.y=c,l=k.size,l.x=g,l.y=m,f.a.k(h,k))}),c=new d("attach"),c.object=a,this.a.k(this.q,c))};E.prototype.detach=function(){var a=new g.voodoo.Event("detach");this.a.k(h,a);this.J.Uc(this.ta);this.ta=h;var a=this.f.position,b=this.f.scale;a.x=a.y=0;b.x=b.y=1;this.f.updateMatrixWorld(e)};E.prototype.localToPage=function(a){var b=this.f.position,c=this.f.scale;return"undefined"!==typeof a.x?{x:a.x*c.x+b.x,y:a.y*c.y+b.y,z:a.z*c.z+b.z}:[a[0]*c.x+b.x,a[1]*c.y+b.y,a[2]*c.z+b.z]};E.prototype.off=function(a,
b){this.a.hb(a,b)};E.prototype.on=function(a,b){this.a.ib(a,b)};E.prototype.pageToLocal=function(a){var b=this.f.position,c=this.f.scale;return"undefined"!==typeof a.x?{x:(a.x-b.x)/c.x,y:(a.y-b.y)/c.y,z:(a.z-b.z)/c.z}:[(a[0]-b.x)/c.x,(a[1]-b.y)/c.y,(a[2]-b.z)/c.z]};E.prototype.remove=function(a){var b=new g.voodoo.Event("remove");b.object=a;this.a.k(this.q,b);a.addedToVoodooTriggers?a.visible=p:this.f.remove(a);a.addedToVoodooScene=p;b=this.ma.indexOf(a);-1!==b&&this.ma.splice(b,1);this.Qb(a)&&(b=
this.ka.indexOf(a),-1!==b&&this.ka.splice(b,1));this.s=e};E.prototype.o=function(){this.h.remove(this.f);this.ta!==h&&this.detach();this.a.o();this.f=this.q=this.h=this.a=h};E.prototype.Qb=function(a){return a instanceof THREE.Mesh||a instanceof THREE.MorphAnimMesh||a instanceof THREE.SkinnedMesh||a instanceof THREE.Line};N.prototype=new $;N.prototype.Ib=function(a){return new E(this.h,a)};N.prototype.h=h;ca.prototype=new X;ca.prototype.add=function(a,b){var c=new R(this.q,a,this,b);this.p.push(c);
a.addedToVoodooScene||(a.visible=p,this.h.add(a));a.addedToVoodooTriggers=e};ca.prototype.remove=function(a){for(var b=0,c=this.p.length;b<c;++b)this.p[b].la===a&&this.p.splice(b,1);a.addedToVoodooScene&&this.h.remove(a);a.addedToVoodooTriggers=p};ca.prototype.o=function(){this.q=this.h=this.p=h};T.prototype=new ha;T.prototype.Jb=function(a){return new ca(this.p,a.scene.h,a)};w.prototype=new F;w.prototype.Ya=function(a){var b=this.e.c;a?(b.aboveLayer&&(this.R.style.pointerEvents="auto"),b.belowLayer&&
(this.L.style.pointerEvents="auto"),b.seamLayer&&(this.O.style.pointerEvents="auto")):(b.aboveLayer&&(this.R.style.pointerEvents="none"),b.belowLayer&&(this.L.style.pointerEvents="none"),b.seamLayer&&(this.O.style.pointerEvents="none"))};w.prototype.xc=function(){this.Xa=1;var a=this.e.c,b=a.aboveLayer,c=a.belowLayer,d={antialias:a.antialias,alpha:e};b&&(this.ba=new THREE.WebGLRenderer(d),this.R=this.ba.domElement,this.sb(this.ba),this.R.style.zIndex=a.aboveZIndex);c&&(this.u=new THREE.WebGLRenderer(d),
this.L=this.u.domElement,this.sb(this.u),this.L.style.zIndex=a.belowZIndex);b&&this.ba.context.getContextAttributes().antialias||c&&this.u.context.getContextAttributes().antialias||(a.antialias=p,a.seamLayer=p);if(!b||!c)a.seamLayer=p;a.seamLayer&&(this.G=new THREE.WebGLRenderer({antialias:p,alpha:e}),this.O=this.G.domElement,this.sb(this.G),this.O.style.zIndex=a.seamZIndex);this.ea(p);this.na(p)};w.prototype.yc=function(){var a=this.e.c,b=a.renderer,c=a.fovY,d=a.K,f=a.Q;a.aboveLayer&&(this.B=new A(this.R,
c,d,f),this.xb=new N,this.lc=new T,this.jc=new P,this.V=new x(I.Above,b,this.B,this.xb,this.lc,this.jc),this.Z.push(this.V));a.belowLayer&&(this.C=new A(this.L,c,d,f),this.Ab=new N,this.tc=new T,this.qc=new P,this.W=new x(I.Below,b,this.C,this.Ab,this.tc,this.qc),this.Z.push(this.W),a.stencils&&(this.A=new A(this.L,c,d,f),this.Bb=new N,this.sc=new T,this.rc=new P,this.ca=new x(I.BelowStencil,b,this.A,this.Bb,this.sc,this.rc),this.Z.push(this.ca)));a.seamLayer&&(this.t=new A(this.O,c,d,f),this.pb=
new N,this.bd=new T,this.Yc=new P,this.qa=new x(I.Seam,b,this.t,this.pb,this.bd,this.Yc),this.Z.push(this.qa),a.stencils&&(this.A||(this.A=new A(this.O,c,d,f)),this.gc=new N,this.ad=new T,this.$c=new P,this.ra=new x(I.SeamStencil,b,this.A,this.gc,this.ad,this.$c),this.Z.push(this.ra)));this.mb=p;this.ic();var n=this;g.addEventListener("resize",function(){n.mb=e},p)};w.prototype.o=function(){var a=this.e.c,b=z.body;a.aboveLayer&&b.removeChild(this.R);a.belowLayer&&b.removeChild(this.L);a.seamLayer&&
b.removeChild(this.O);a.performanceScaling&&this.da.o()};w.prototype.X=function(a){return this.s?e:!a?p:a.X()};w.prototype.ea=function(a){function b(a,b){a.setViewport(0,0,r,u);var c=b.style;c.width=f;c.height=n;b.width=r;b.height=u}this.jd();var c=this.wb,d=c.width,c=c.height,f=d+"px",n=c+"px",m=g.devicePixelRatio||1,r=d*m*this.Xa,u=c*m*this.Xa,d=this.e.c;d.aboveLayer&&b(this.ba,this.R);d.belowLayer&&b(this.u,this.L);d.seamLayer&&b(this.G,this.O);c=z.body.style;c.display="none";c.display="block";
this.s=e;d.realtime&&a&&this.U()};w.prototype.na=function(a){this.tb=g.pageXOffset+"px";this.ub=g.pageYOffset+"px";this.s=e;this.e.c.realtime&&a&&this.U()};w.prototype.Sc=function(){var a=this;g.addEventListener("scroll",function(){a.na.call(a,e)},p);g.addEventListener("resize",function(){a.ea.call(a,e)},p)};w.prototype.U=function(){var a;a=p;var b=this.e.c,c=b.aboveLayer,d=b.belowLayer,f=b.seamLayer,g=b.stencils,m=b.performanceScaling;this.hd();m&&(this.da.Cc(),m&&!this.bc&&(this.da.bb>b.Qc||0===
this.e.T?this.Yb=new Date:(new Date-this.Yb)/1E3>b.Rc&&(this.Xa=0.5,this.bc=e,this.ea(p))));if(d&&(this.X(this.W)||this.X(this.ca)))g?(a=this.u.context,a.enable(a.STENCIL_TEST),a.clearStencil(0),a.stencilOp(a.REPLACE,a.REPLACE,a.REPLACE),a.stencilFunc(a.NEVER,1,4294967295),this.u.autoClear=p,this.u.clear(),this.u.render(this.Bb.h,this.A.d),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),a.stencilFunc(a.EQUAL,1,4294967295)):(a=this.u.context,a.disable(a.STENCIL_TEST),this.u.autoClear=e),this.u.render(this.Ab.h,
this.C.d),a=e;c&&this.X(this.V)&&(this.ba.render(this.xb.h,this.B.d),a=e);if(f&&(this.X(this.qa)||this.X(this.ra)))a=b.Zc,d=this.t.position.z,c=d-a,f=d+a,a=this.G.context,a.enable(a.STENCIL_TEST),this.G.autoClear=p,this.G.clear(),g?(a.clearStencil(1),a.stencilOp(a.REPLACE,a.REPLACE,a.REPLACE),a.stencilFunc(a.NEVER,0,4294967295),this.G.render(this.gc.h,this.A.d),this.t.aa(c,d),this.G.render(this.pb.h,this.t.d)):a.clearStencil(0),g=this.pb.h,d=this.t.d,a.stencilOp(a.REPLACE,a.REPLACE,a.REPLACE),a.stencilFunc(a.NEVER,
1,4294967295),this.t.aa(b.K,c),this.G.render(g,d),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),a.stencilFunc(a.NOTEQUAL,1,4294967295),this.t.aa(c,f),this.G.render(g,d),a=e;b.aboveLayer&&(this.ba.context.finish(),g=this.R.style,g.left=this.tb,g.top=this.ub);b.belowLayer&&(this.u.context.finish(),g=this.L.style,g.left=this.tb,g.top=this.ub);b.seamLayer&&(this.G.context.finish(),b=this.O.style,b.left=this.tb,b.top=this.ub);this.s=p;this.V&&this.V.ha();this.W&&this.W.ha();this.ca&&this.ca.ha();this.qa&&this.qa.ha();
this.ra&&this.ra.ha();a&&this.da&&this.da.U()};w.prototype.qb=function(a){var b=this.e.c;b.aboveLayer&&(this.R.style.cursor=a);b.belowLayer&&(this.L.style.cursor=a);b.seamLayer&&(this.O.style.cursor=a)};w.prototype.sb=function(a){var b=a.domElement,c=b.style;a.setFaceCulling(THREE.CullFaceFront,THREE.FrontFaceDirectionCCW);c.position="absolute";c.pointerEvents="none";z.body.appendChild(b)};w.prototype.hd=function(){this.B&&this.B.m();this.C&&this.C.m();this.t&&this.t.m();this.A&&this.A.m();this.mb&&
(this.ic(),this.mb=p);if(this.B&&this.B.F||this.C&&this.C.F||this.t&&this.t.F||this.A&&this.A.F){for(var a=this.e.I,b=new g.voodoo.Event("cameramove"),c=0,d=a.length;c<d;++c)a[c].dispatch(b);this.B&&(this.B.F=p);this.C&&(this.C.F=p);this.t&&(this.t.F=p);this.A&&(this.A.F=p)}};w.prototype.ic=function(){var a=this.e.c,b=a.aboveLayer,c=a.belowLayer;if(c)if(b){var d=this.C.position.z;this.C.aa(d-0.5,a.Q)}else this.C.aa(a.K,a.Q);b&&(c?(d=this.B.position.z,this.B.aa(a.K,d)):this.B.aa(a.K,a.Q))};w.prototype.jd=
function(){var a=z.createElement("div"),b=z.documentElement;a.style.cssText="position: fixed; top: 0; left: 0; bottom: 0; right: 0;";b.insertBefore(a,b.firstChild);this.wb=new J(a.offsetWidth,a.offsetHeight);b.removeChild(a)};w.prototype.kd=function(){var a=z.body.style;a.width="100%";a.height="100%";a.margin="0px"};w.prototype.Z=h;v.prototype.destroy=function(){this.a.k(h,new g.voodoo.Event("destroy"));-1!==this.Wa&&g.clearInterval(this.Wa);-1!==this.Ta&&g.clearInterval(this.Ta);for(-1!==this.Sa&&
g.cancelAnimationFrame(this.Sa);0<this.I.length;)this.I[0].destroy();this.I=h;this.j.o();this.Na.o();this.a.o();"undefined"!==typeof g.voodoo.engine&&delete g.voodoo.engine;this.I=this.a=this.Na=this.j=h;this.Sa=this.Ta=this.Wa=-1;this.J=this.eb=this.c=h;da=0};v.prototype.frame=function(){this.m();this.j.U()};v.prototype.off=function(a,b){this.a.hb(a,b)};v.prototype.on=function(a,b){this.a.ib(a,b)};v.prototype.models=h;v.prototype.oc=function(a){this.I.push(a);this.a.k(h,new g.voodoo.Event("addmodel",
a))};v.prototype.Ob=function(){return 0!==this.T};v.prototype.Vc=function(a){this.I.splice(this.I.indexOf(a),1);this.a.k(h,new g.voodoo.Event("removemodel",a))};v.prototype.ec=function(a,b){var c=this;this.Sa=requestAnimationFrame(function(){c.ec(a,b)});this.Ob()&&(a&&this.m(),b&&this.j.U())};v.prototype.cd=function(){var a=this;this.ja=this.Ga=this.T=0;g.addEventListener("focus",function(){a.T=0;a.ja=setTimeout(function(){a.T=Date.now();a.ja=0},a.c.dd)},p);g.addEventListener("blur",function(){a.T=
0;0!==a.ja&&(clearTimeout(a.ja),a.ja=0)},p);setTimeout(function(){if(!z.hasFocus||z.hasFocus())a.T=Date.now()},a.c.ed)};v.prototype.m=function(){var a=0,b=Date.now();this.Ob()&&(a=(b-this.T)/1E3,this.T=b);a>2*this.Ga?(b=this.Ga,this.Ga=a,a=b):this.Ga=a;this.J.m();for(var b=this.I,c=0,d=b.length;c<d;++c)b[c].update(a);this.Na.m()};v.prototype.ld=function(){!this.c.aboveLayer&&!this.c.belowLayer&&C.v("At least one layer must be enabled.","(Engine::validateOptions_)")};v.prototype.Na=h;v.prototype.eb=
h;v.prototype.c=h;v.prototype.pa=h;v.prototype.j=h;this.engine=v.prototype.J=h;this.Engine=v;this.version=h;m.prototype.aboveLayer=e;m.prototype.aboveZIndex=9999;m.prototype.antialias=e;m.prototype.belowLayer=e;m.prototype.belowZIndex=-1;m.prototype.Ac=500;m.prototype.fovY=30;m.prototype.frameLoop=e;m.prototype.performanceScaling=e;m.prototype.Qc=45;m.prototype.Rc=3;m.prototype.realtime=e;m.prototype.renderer=ja.ThreeJs;m.prototype.renderInterval=0;m.prototype.Zc=10;m.prototype.seamLayer=e;m.prototype.seamZIndex=
1E4;m.prototype.standardLighting=e;m.prototype.stencils=e;m.prototype.dd=350;m.prototype.ed=1E3;m.prototype.updateInterval=0;m.prototype.Q=1E4;m.prototype.K=0.1;this.Options=m;var V=u.extend();V.prototype.createLight=function(){C.v("createLight_() undefined.");return h};V.prototype.load=function(){this.Ma=this.createLight();this.scene.add(this.Ma)};V.prototype.unload=function(){this.scene.remove(this.Ma)};V.prototype.setColor=function(a){a=g.voodoo.utility.convertCssColorToThreeJsColor(a);this.Ma.color.copy(a)};
var Y=r.extend();Y.prototype.initialize=function(a){this.za=a.color||"white";var b=this;Object.defineProperty(this,"color",{get:function(){return b.za},set:function(a){b.view.setColor(a);b.za=a}})};Y.prototype.setUpViews=function(){this.color=this.za?this.za:"black"};Y.prototype.color=h;Y.prototype.stencilViewType=u.extend();var W=V.extend();W.prototype.createLight=function(){return new THREE.AmbientLight};var ka=Y.extend();ka.prototype.name="AmbientLight";ka.prototype.viewType=W;W=V.extend();W.prototype.createLight=
function(){return new THREE.PointLight};W.prototype.load=function(){V.prototype.load.apply(this);this.updatePosition()};W.prototype.updatePosition=function(){var a=this.Ma.position,b=this.camera.position;a.x=b.x;a.y=b.y;a.z=b.z};var ga=Y.extend();ga.prototype.name="CameraLight";ga.prototype.viewType=W;ga.prototype.setUpViews=function(){this.on("cameramove",function(){this.view.updatePosition()})}}for(var B=["voodoo"],J=g,K=0;K<B.length-1;++K)J=J[B[K]];if(J[B[B.length-1]]){var K=J[B[B.length-1]],da=
new $,Z;for(Z in da)K[Z]=da[Z]}else J[B[B.length-1]]=new $;J[B[B.length-1]].version="0.9.0.min"})(window,document,void 0);
