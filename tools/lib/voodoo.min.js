'use strict';var e=!0,h=null,m=!1;function x(){return function(){}}function da(f){return function(){return f}}
(function(f,t){function Y(){function B(a){this.mc=a||"voodoo";this.Gd="["+this.mc+"]"}function I(a,b){this.width=a;this.height=b}function J(a,b){this.x=a;this.y=b}function Z(){Object.defineProperty(this,"disableCache",{get:da(m),set:function(){y.p("Debug settings may only be set in debug builds.","(Debug::disableCache)")},enumerable:e});Object.defineProperty(this,"disableStencils",{get:da(m),set:function(){y.p("Debug settings may only be set in debug builds.","(Debug::disableStencils)")},enumerable:e});
Object.defineProperty(this,"drawStencils",{get:da(m),set:function(){y.p("Debug settings may only be set in debug builds.","(Debug::drawStencils)")},enumerable:e});Object.defineProperty(this,"showFps",{get:da(m),set:function(){y.p("Debug settings may only be set in debug builds.","(Debug::showFps)")},enumerable:e})}function L(){this.Fc={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",
blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",
darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",
lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",
mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",
pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",
whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}function E(){var a=this.extendableMethodStack,b;for(b in a)if(a.hasOwnProperty(b)){var c=a[b];this[b]===c.Z[c.G]&&--c.G}this.base.Uc=this;this.construct.apply(this,arguments)}function X(a){var b=a[0],c=this,d;for(d in b)try{"function"===typeof b[d]&&(c[d]=function(a,b){return function(){for(var d,g=0,q=b.length;g<q;++g)d=b[g],d=d[a].apply(d,arguments);return d===b[b.length-1]?c:d}}(d,a))}catch(g){}}function w(a,b,c,d,g,k){this.kc=a;this.f=
b;this.d=c;this.pc=d;this.xa=g;this.Hb=k;this.O=[]}function F(a){this.L=a}function M(){this.L={}}function $(){this.ga=m;this.sb=this.$a=0;this.M=t.createElement("div");var a=this.M.style;a.position="fixed";a.zIndex=999999999;a.left="0px";a.top="0px";a.backgroundColor="black";a.color="lime";a.fontStyle="bold";a.fontSize="200%";a.fontFamily="sans-serif";this.M.display="none";var b=this;this.Lc=setInterval(function(){b.ab=b.$a;b.jd=b.sb;b.$a=0;b.sb=0},1E3)}function N(){}function A(){}function Y(){}function C(){}
function aa(a){this.Ca=a;this.Vc=0;this.ha={};this.Fa=this.Ga=this.Ia=this.Ha=Number.MIN_VALUE;this.k()}function ea(){this.va={};this.Wc=this.Xc=0;this.zb={}}function O(){this.ja={};this.jb=0}function P(a,b,c,d){this.q=a;this.ma=b;this.Sa="undefined"===typeof d?-1:d;this.j=c;this.i=a.model}function V(){}function ga(){}function ha(){}function G(a){this.n=a;this.Xb();this.n.qa.vb(new J(0,0));this.xc();var b=this;this.n.on("removemodel",function(a){b.h&&a.model===b.h.i&&(b.h=h);if(b.R)for(var d=0;3>
d;++d){var g=b.R[d];g&&a.model===g.i&&(b.R[d]=h)}if(b.X)for(d=0;3>d;++d)(g=b.X[d])&&a.model===g.i&&(b.X[d]=h)})}function z(a,b,c,d){this.d=new THREE.Camera;this.bb=new THREE.Frustum;this.Ib=a;this.Vb=b;this.J=c;this.P=d;this.Tc();this.Jc()}function Q(a){this.n=a;this.f=a.f;this.nc=new THREE.Projector}function D(a,b){this.c=a;this.q=b;this.aa=f.voodoo.engine.aa;this.ua=h;this.j=new THREE.Object3D;this.c.add(this.j);this.c.__objectsAdded=[];this.na=[];this.la=[];this.e=new O;var c=this;Object.defineProperty(this,
"objects",{get:function(){for(var a=[],b=c.j.children,k=0,l=b.length;k<l;++k){var v=b[k];v.addedToVoodooScene&&a.push(v)}return a},enumerable:e})}function K(){this.c=new THREE.Scene}function ba(a,b,c){this.o=a;this.c=b;this.q=c}function R(){this.o=[]}function r(a,b){try{this.n=a,this.a=b,this.Y=[],this.Sc(),this.Hc(),this.Ic(),this.cd(),this.a.performanceScaling?(this.da=new $,this.fb=new Date,this.lc=m):this.da=h}catch(c){throw this.m(),c;}}function s(a){a=new n(a);for(var b in a);this.a=a;this.Dd();
this.gb=new M;this.aa=new ea;this.I=[];var c=this;Object.defineProperty(this,"models",{get:function(){return c.I.slice(0)},enumerable:e});this.vd();switch(a.renderer){case ia.ThreeJs:this.f=new r(this,this.a);this.qa=new Q(this);break;default:this.qa=this.f=h,y.p("Unsupported renderer","(Engine::Engine)")}this.e=new O;this.La=new G(this);f.voodoo.engine=this;a.standardLighting&&(new ja({color:"white"}),new fa({color:"white"}));this.Qa=this.Ra=this.Ta=-1;b=0===this.a.updateInterval;var d=0===this.a.renderInterval;
a.frameLoop&&((b||d)&&this.oc(b,d),b||(this.Ta=f.setInterval(function(){c.k()},this.a.updateInterval)),d||(this.Ra=f.setInterval(function(){c.f.T()},this.a.renderInterval)))}function n(a){if(a)for(var b in a)this[b]=a[b]}B.prototype.Qc=x();B.prototype.i=function(a,b){var c=Array.prototype.slice.call(arguments,1);c.unshift(a.privateModelProperties.id);this.Qc.apply(this,c)};B.prototype.p=function(a){var b=Array.prototype.slice.call(arguments);b.unshift("**ERROR**");throw{name:this.mc+" exception",
message:b.join(" "),toString:function(){return this.name+": "+this.message}};};var y=new B("voodoo");I.prototype.width=0;I.prototype.height=0;J.prototype.x=0;J.prototype.y=0;Z.prototype.disableCache=m;Z.prototype.disableStencils=m;Z.prototype.drawStencils=m;Z.prototype.showFps=m;this.debug=new Z;L.prototype.convertCssColorToThreeJsColor=function(a){a=a.toLowerCase();return"#"===a[0]?this.Kb(a):0===a.indexOf("rgb(")?(a=a.substring(4,a.length-1).split(","),this.Lb(a[0],a[1],a[2])):0===a.indexOf("rgba(")?
(a=a.substring(5,a.length-1).split(","),this.Lb(a[0],a[1],a[2])):0===a.indexOf("hsl(")?(a=a.substring(4,a.length-1).split(","),this.Jb(a[0],a[1],a[2])):0===a.indexOf("hsla(")?(a=a.substring(5,a.length-1).split(","),this.Jb(a[0],a[1],a[2])):this.Gc(a)};L.prototype.findAbsolutePosition=function(a){var b=0,c=0;if(a.offsetParent){do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent)}return{x:b,y:c}};L.prototype.Kb=function(a){return new THREE.Color(parseInt("0x"+a.substring(1),16))};L.prototype.Lb=
function(a,b,c){a=parseFloat(a)/255;b=parseFloat(b)/255;c=parseFloat(c)/255;return(new THREE.Color).setRGB(a,b,c)};L.prototype.Jb=function(a,b,c){a=parseFloat(a);b=parseFloat(b)/100;c=parseFloat(c)/100;b*=1-Math.abs(2*c-1);var d=a/60,g=b*(1-Math.abs(parseInt(d,10)%2-1)),k=a=0,l=0;0<=d&&1>d?(a=b,k=g):1<=d&&2>d?(a=g,k=b):2<=d&&3>d?(k=b,l=g):3<=d&&4>d?(k=g,l=b):4<=d&&5>d?(a=g,l=b):5<=d&&6>d&&(a=b,l=g);c-=0.5*b;return(new THREE.Color).setRGB(a+c,k+c,l+c)};L.prototype.Gc=function(a){return this.Kb(this.Fc[a.toLowerCase()])};
this.utility=new L;E.prototype.construct=function(){y.p("Extendable::construct not implemented","(Extendable::construct)")};E.prototype.base={};E.extend=function(a){function b(){E.apply(this,arguments)}function c(a,b,c){var d=a[b];d||(d=a[b]={Z:[],G:-1});a=d.Z;a[d.G]!==c&&(a.push(c),++d.G)}function d(){var a=k.base={},b;for(b in f)if(f.hasOwnProperty(b)){var c=f[b];a[b]=function(a,b,c){return function(){if(0<=b.G){var d=b.G--;try{var g=c[d].apply(a.Uc,arguments)}catch(k){throw b.G=b.Z.length-1,k;
}++b.G;return g}}}(a,c,c.Z)}}b.extend=E.extend;var g=this.prototype,k=b.prototype,l;for(l in g)g.hasOwnProperty(l)&&(k[l]=g[l]);var v=g.extendableMethodStack,f=k.extendableMethodStack={},q;for(q in v)if(v.hasOwnProperty(q)){var n=v[q];f[q]={Z:n.Z.slice(0),G:n.G}}for(q in g)v=g[q],"function"===typeof v&&g.hasOwnProperty(q)&&c(f,q,v);if(!a)return d(),b;"function"===typeof a&&(a=a.prototype);if(g=a.extendableMethodStack)for(q in g)if(g.hasOwnProperty(q))for(var v=g[q].Z,n=0,p=v.length;n<p;++n)c(f,q,
v[n]);for(l in a)a.hasOwnProperty(l)&&(q=a[l],q!==g&&("function"===typeof q&&c(f,l,q),k[l]=q));d();return b};this.Extendable=E;var H={Above:1,Below:2,BelowStencil:3,Seam:4,SeamStencil:5};w.prototype.zc=function(a){this.O.push(a)};w.prototype.ia=function(){for(var a=0,b=this.O.length;a<b;++a){var c=this.O[a].scene;c.H=m;c.Za=m}};w.prototype.W=function(){for(var a=this.d.bb,b=0,c=this.O.length;b<c;++b){var d=this.O[b],g=d.scene;if(d.loaded){if(g.Za)return e;if(g.H){d=g.la;if(d.length!==g.na.length)return e;
for(var g=0,k=d.length;g<k;++g){var l=d[g];if(l.geometry){if(l.updateMatrixWorld(e),a.intersectsObject(l))return e}else if(l=l.children)for(var f=0,n=l.length;f<n;++f){var q=l[f];if(q.geometry&&(q.updateMatrixWorld(e),a.intersectsObject(q)))return e}}}}}return m};w.prototype.gd=function(a){this.O.splice(this.O.indexOf(a),1)};w.prototype.Hb=h;w.prototype.d=h;w.prototype.kc=h;w.prototype.f=h;w.prototype.pc=h;w.prototype.xa=h;w.prototype.O=h;F.prototype.addRef=function(a,b,c){this.ea(b,c)[a].count++};
F.prototype["delete"]=function(a,b,c){delete this.ea(b,c)[a]};F.prototype.get=function(a,b,c,d,g,k){var l=arguments[1],v=b,n=c,q=d;"function"===typeof l?(l=arguments[2],"function"===typeof l?(l=arguments[3],"number"!=typeof l&&(q=h,g=l,k=arguments[4])):(n=h,"number"!==typeof l&&(q=h,g=l,k=arguments[3]))):(q=n=v=h,g=l,k=arguments[2]);l=this.ea(g,k);if(v){var l=l[a],p=l.kb;if(p)return v(p),h;var u=m,r;n&&(r=f.setTimeout(function(){n("Cache::get timeout");u=e},q||2E3));l.hb.push(function(a){f.clearTimeout(r);
u||v(a)});return h}return l[a].kb};F.prototype.has=function(a,b,c){return this.ea(b,c).hasOwnProperty(a)};F.prototype.release=function(a,b,c){b=this.ea(b,c);b.hasOwnProperty(a)&&0>=--b[a].count&&delete b[a]};F.prototype.set=function(a,b,c,d){c=this.ea(c,d);if(c.hasOwnProperty(a)){if(a=c[a],a.kb=b){c=a.hb;d=0;for(var g=c.length;d<g;++d)c[d](b);a.hb=[]}}else c[a]={kb:b,count:1,hb:[]}};F.prototype.ea=function(a,b){var c,d;a?(c=a,d=b||"*"):(c=this.gc,d=this.hc);this.L.hasOwnProperty(d)||(this.L[d]={});
d=this.L[d];d.hasOwnProperty(c)||(d[c]={});return d[c]};F.prototype.gc="";F.prototype.hc="";M.prototype.Mb=function(a){var b=new F(this.L);b.gc=a.name;b.hc=a.organization;return b};var ca=0,u=E.extend();u.prototype.cleanUp=function(){var a=this.base.cleanUp;"function"===typeof a&&a()};u.prototype.construct=function(a){!this.viewType.prototype.above&&!this.viewType.prototype.below&&y.p("View must exist on at least one layer.","(Model::Model)");this.stencilViewType=this.stencilViewType||this.viewType;
var b=this.privateModelProperties={},c="<"+ ++ca+",";"*"!==this.organization&&(c+=this.organization+".");c+=this.name+">";b.id=c;y.i(this,"Constructing");c=f.voodoo;c.engine||(c.engine=new s(new n));c=c.engine;b.e=new O;var d=b.L=c.gb.Mb(this);Object.defineProperty(this,"cache",{get:function(){return d},enumerable:e});this.initialize(a||{});a=b.O=[];var g=b.Hd=[];b.Ma=0;b.Na=0;Object.defineProperty(this,"loaded",{get:function(){return b.Ma===b.Na},enumerable:e});for(var k=this.stencilViewType===this.viewType,
l=this.viewType.prototype,v=l.above,l=l.below,p=c.f.Y,q=0,u=p.length;q<u;++q){var r=p[q];switch(r.kc){case H.Above:v&&a.push(new this.viewType(this,r));break;case H.Below:l&&a.push(new this.viewType(this,r));break;case H.Seam:v&&a.push(new this.viewType(this,r));break;case H.BelowStencil:l&&(k?a.push(new this.viewType(this,r)):g.push(new this.stencilViewType(this,r)));break;case H.SeamStencil:l&&(k?a.push(new this.viewType(this,r)):g.push(new this.stencilViewType(this,r)))}}var k=a.length,v=g.length,
t=b.q=1<k?new X(a):a[0],w=b.rc=1<v?new X(g):g[0];b.Na=k+v;Object.defineProperty(this,"view",{get:function(){return t},enumerable:e});Object.defineProperty(this,"stencilView",{get:function(){return w},enumerable:e});this.setUpViews();c.yc(this)};u.prototype.destroy=function(){y.i(this,"Destroying");var a=this.privateModelProperties,b=f.voodoo,c=new b.Event("destroy",this);a.e.u(this,c);this.tearDownViews();b.engine.fd(this);b=a.q;c=a.rc;b&&b.destroy&&b.destroy();c&&c.destroy&&c.destroy();this.cleanUp();
a.e.m();a.e=h;a.q=h;a.rc=h};u.prototype.dispatch=function(a){this.privateModelProperties.e.u(this,a);return this};u.prototype.initialize=function(a){var b=this.base.initialize;"function"===typeof b&&b(a)};u.prototype.off=function(a,b){this.privateModelProperties.e.lb(a,b);return this};u.prototype.on=function(a,b){var c=this.privateModelProperties;c.e.mb(a,b);"load"===a&&c.Ma===c.Na&&b.call(this,new f.voodoo.Event("load",this));return this};u.prototype.setUpViews=function(){var a=this.base.setUpViews;
"function"===typeof a&&a()};u.prototype.tearDownViews=function(){var a=this.base.tearDownViews;"function"===typeof a&&a()};u.prototype.update=function(a){var b=this.base.update;"function"===typeof b&&b(a)};u.prototype.cache=h;u.prototype.loaded=m;u.prototype.stencilView=h;u.prototype.view=h;u.prototype.onViewLoad=function(){var a=this.privateModelProperties;a.Ma++;if(a.Ma===a.Na){var b=new f.voodoo.Event("load",this);a.e.u(this,b)}};u.prototype.name=h;u.prototype.organization="*";u.prototype.viewType=
h;u.prototype.stencilViewType=h;u.extend=function(a){var b=E.extend.call(this,a),c=b.prototype,d=this.prototype,g=d.name,k=c.name;g&&(k&&k!==g)&&(c.name=g+"."+k);k=d.viewType;g=c.viewType;k&&(g&&k!==g)&&(c.viewType=k.extend(g));d=d.stencilViewType||k;a=("function"===typeof a?a.prototype:a)||{};a=a.stencilViewType||g;d&&(a&&d!==a)&&(c.stencilViewType=d.extend(a));b.extend=u.extend;return b};this.Model=u;var p=E.extend();p.prototype.attach=function(a,b,c,d){this.privateViewProperties.c.Db(a,b,c,d)};
p.prototype.construct=function(a,b){var c=this.privateViewProperties={},d=this;Object.defineProperty(this,"cache",{get:function(){return c.L},enumerable:e});Object.defineProperty(this,"camera",{get:function(){return c.Ja.d},enumerable:e});Object.defineProperty(this,"loaded",{get:function(){return c.eb},set:function(a){c.eb=a;!c.cb&&a&&(c.cb=e,c.i.onViewLoad(d))},enumerable:e});Object.defineProperty(this,"model",{get:function(){return c.i},enumerable:e});Object.defineProperty(this,"renderer",{get:function(){return c.Ja.f},
enumerable:e});Object.defineProperty(this,"scene",{get:function(){return c.c},enumerable:e});Object.defineProperty(this,"triggers",{get:function(){return c.o},enumerable:e});c.i=a;c.Ja=b;c.c=b.pc.Ob(this);c.o=b.xa.Pb(this);c.L=b.Hb.Mb(a);this.dirty();b.zc(this);c.eb=e;c.cb=m;this.load();c.eb&&(c.cb=e,a.onViewLoad(this))};p.prototype.destroy=function(){this.unload();var a=this.privateViewProperties;a.o.m();a.c.m();a.Ja.gd(this);a.i=h;a.o=h;a.c=h;a.Ja=h;a.L=h};p.prototype.detach=function(){this.privateViewProperties.c.Ya()};
p.prototype.dirty=function(){this.privateViewProperties.c.H=e};p.prototype.load=function(){var a=this.base.load;"function"===typeof a&&a()};p.prototype.localToPage=function(a){return this.privateViewProperties.c.fc(a)};p.prototype.pageToLocal=function(a){return this.privateViewProperties.c.jc(a)};p.prototype.unload=function(){var a=this.base.unload;"function"===typeof a&&a()};p.prototype.above=e;p.prototype.below=e;p.prototype.cache=h;p.prototype.camera=h;p.prototype.loaded=h;p.prototype.model=h;
p.prototype.renderer=h;p.prototype.scene=h;p.prototype.triggers=h;p.extend=function(a){a=E.extend.call(this,a);var b=a.prototype,c=this.prototype;this!==p&&(b.above=b.above||c.above,b.below=b.below||c.below);a.extend=p.extend;return a};this.View=p;$.prototype.m=function(){this.ga&&(this.M.display="none",t.body.removeChild(this.M),this.ga=m);f.clearInterval(this.Lc)};$.prototype.Mc=function(){this.$a++;f.voodoo.debug.showFps?(this.ga||(this.M.display="block",t.body.appendChild(this.M),this.ga=e),this.M.innerHTML=
"Frames/second: "+this.ab+", Renders/second: "+this.jd):this.ga&&(this.M.display="none",t.body.removeChild(this.M),this.ga=m)};$.prototype.T=function(){this.sb++};$.prototype.ab=0;N.prototype.position={};N.prototype.position.x=0;N.prototype.position.y=0;N.prototype.position.z=0;N.prototype.zNear=0;N.prototype.zFar=0;A.prototype.add=x();A.prototype.off=x();A.prototype.on=x();A.prototype.remove=x();A.prototype.objects=h;A.prototype.Db=x();A.prototype.m=x();A.prototype.Ya=x();A.prototype.fc=function(){return{}};
A.prototype.jc=function(){return{}};A.prototype.H=e;A.prototype.Za=e;A.prototype.na=h;A.prototype.la=h;Y.prototype.Ob=function(){y.p("createScene_() undefined.");return h};var ia={ThreeJs:0};this.Renderer=ia;C.prototype.Va=x();C.prototype.m=x();C.prototype.ic=x();C.prototype.T=x();C.prototype.ub=x();C.prototype.U=h;C.prototype.V=h;C.prototype.ca=h;C.prototype.ra=h;C.prototype.sa=h;C.prototype.Ab=h;aa.prototype.wc=function(a){var b=this.Vc++;this.ha[b]=a;this.ib++;a(this.Ha,this.Ia,this.Ga,this.Fa,
e,e);return b};aa.prototype.dd=function(a){delete this.ha[a];this.ib--};aa.prototype.k=function(){var a=f.voodoo.utility.findAbsolutePosition(this.Ca),b=this.Ca.offsetWidth,c=this.Ca.offsetHeight,d=a.x!==this.Ha||a.y!==this.Ia,g=b!==this.Ga||c!==this.Fa;if(d||g){this.Ha=a.x;this.Ia=a.y;this.Ga=b;this.Fa=c;for(var k in this.ha)this.ha.hasOwnProperty(k)&&this.ha[k].call(h,this.Ha,this.Ia,this.Ga,this.Fa,d,g)}};aa.prototype.ib=0;ea.prototype.yd=function(a,b){var c,d;a.hasOwnProperty("VoodooTrackedElementId")?
(d=a.VoodooTrackedElementId,c=this.va[d]):(d=a.VoodooTrackedElementId=this.Xc++,c=this.va[d]=new aa(a));var g=c.wc(b),k=this.Wc++;this.zb[k]={Ad:d,zd:c,Ec:g};return k};ea.prototype.ed=function(a){var b=this.zb[a],c=b.zd,d=b.Ad,b=b.Ec;delete this.zb[a];c.dd(b);0===c.ib&&(delete this.va[d],delete c.Ca.VoodooTrackedElementId)};ea.prototype.k=function(){for(var a in this.va)this.va[a].k()};O.prototype.m=function(){S.ta-=this.jb;this.ja=h};O.prototype.u=function(a,b){var c=this.ja[b.type];if(c)for(var d=
0,g=c.length;d<g;++d)c[d].call(a,b)};O.prototype.lb=function(a,b){S.Zb(a)&&(S.ta--,this.jb--);var c=this.ja[a];c&&c.indexOf(b)&&c.splice(c.indexOf(b),1)};O.prototype.mb=function(a,b){S.Zb(a)&&(S.ta++,this.jb++);var c=this.ja[a];c||(c=this.ja[a]=[]);-1===c.indexOf(b)&&c.push(b)};P.prototype.Da=function(a){return!!a&&this.i===a.i&&this.Sa===a.Sa};P.prototype.i=h;P.prototype.ma=h;P.prototype.j=h;P.prototype.Sa=-1;P.prototype.q=h;this.l=function(a,b,c){this.type=a;this.model=b;this.triggerId="undefined"===
typeof c?-1:c};this.l.prototype.Rc=function(a,b,c,d,g,k){this.page.x=a;this.page.y=b;this.hit.x=c;this.hit.y=d;this.hit.z=g;this.button=k||0};this.l.prototype.button=0;this.l.prototype.hit={};this.l.prototype.hit.x=Number.MAX_VALUE;this.l.prototype.hit.y=Number.MAX_VALUE;this.l.prototype.hit.z=Number.MAX_VALUE;this.l.prototype.model=h;this.l.prototype.object=h;this.l.prototype.page={};this.l.prototype.page.x=Number.MAX_VALUE;this.l.prototype.page.y=Number.MAX_VALUE;this.l.prototype.size={};this.l.prototype.size.x=
Number.MAX_VALUE;this.l.prototype.size.y=Number.MAX_VALUE;this.l.prototype.type=h;this.l.prototype.triggerId=-1;this.Event=this.l;var S={ta:0,Zb:function(a){return"mouseup"===a||"mousedown"===a||"click"===a||"dblclick"===a||"mousemove"===a||"mouseover"===a||"mouseout"===a}};V.prototype.add=x();V.prototype.cursor=function(a){this.Qb=a};V.prototype.remove=x();V.prototype.m=x();V.prototype.Qb="auto";ga.prototype.Pb=function(){y.p("createTriggers_() undefined.");return h};ga.prototype.o=h;ha.prototype.Pa=
function(){y.p("raycast_() undefined.");return h};ha.prototype.vb=function(){y.p("setMouse_() undefined.")};G.prototype.xc=function(){function a(a){d.$c(a)}function b(a){d.Yc(a)}function c(a){d.Zc(a)}var d=this;t.addEventListener("mousemove",c,m);t.addEventListener("mousedown",b,m);t.addEventListener("mouseup",a,m);this.od=c;this.nd=b;this.pd=a};G.prototype.m=function(){this.Xb();this.n=h;t.removeEventListener("mousemove",this.od,m);t.removeEventListener("mousedown",this.nd,m);t.removeEventListener("mouseup",
this.pd,m)};G.prototype.C=function(a,b,c,d){a=b===h?new f.voodoo.Event(a,h):new f.voodoo.Event(a,b.i,b.Sa);a.Rc(this.Wa+f.pageXOffset,this.Xa+f.pageYOffset,this.cc,this.dc,this.ec,c);(d||b).i.dispatch(a)};G.prototype.Xb=function(){this.h=h;this.R=[h,h,h];this.X=[h,h,h];this.Fd=m;this.nb=[m,m,m];this.Oa=m;this.ec=this.dc=this.cc=this.Xa=this.Wa=0;this.bc=[h,h,h];this.$b=[0,0,0];this.ac=[0,0,0]};G.prototype.Yc=function(a){if(this.h!==h){a.preventDefault();var b=a.button,c=this.X[b],d=new Date-this.bc[b],
g=this.R[b]=this.h;this.C("mousedown",this.h,b);g.Da(c)&&(this.$b[b]===a.clientX&&this.ac[b]===a.clientY&&d<=this.n.a.Kc)&&(this.nb[b]=e)}};G.prototype.Zc=function(a){this.h!==h&&a.preventDefault();this.Wa=a.clientX;this.Xa=a.clientY;this.Oa=e;this.n.a.realtime&&this.k()};G.prototype.$c=function(a){var b=a.button;if(this.h){a.preventDefault();this.C("mouseup",this.h,b);var c=this.R[b],d=this.X[b];c&&this.h!==c&&this.C("mouseup",this.h,b,c);this.h.Da(c)&&(this.C("click",c,b),this.nb[b]&&c.Da(d)?(this.X[b]=
h,this.nb[b]=m,this.C("dblclick",c,b)):(this.X[b]=c,this.bc[b]=new Date,this.$b[b]=a.clientX,this.ac[b]=a.clientY))}else(c=this.R[b])&&this.C("mouseup",h,b,c);this.R[b]=h};G.prototype.Pa=function(){var a=this.n.qa.Pa();this.cc=a.Nc;this.dc=a.Oc;this.ec=a.Pc;return a.wa};G.prototype.k=function(){var a=this.n,b=a.qa,a=a.f;this.Oa&&b.vb(new J(this.Wa,this.Xa));if(!(0>=S.ta)){for(var b=this.Pa(),c=0;3>c;++c){var d=this.R[c];d&&b!==d&&this.C("mousemove",b,c,d)}b!==h?(this.Oa&&this.C("mousemove",b),b.Da(this.h)||
(this.h!==h&&this.C("mouseout",this.h),this.C("mouseover",b)),a.Va(e)):(this.h!==h&&this.C("mouseout",this.h),a.Va(m));this.h=b;this.Oa=m;this.h!==h?a.ub(this.h.j.Qb):a.ub("auto")}};z.prototype=new N;z.prototype.Nb=function(){if(0===this.Vb){var a=f.innerWidth/2,b=f.innerHeight/2;this.d.projectionMatrix.makeOrthographic(-a,a,b,-b,this.J,this.P)}else this.d.projectionMatrix.makePerspective(this.Ub,this.Cb,this.J,this.P)};z.prototype.Jc=function(){var a=this;Object.defineProperty(this,"position",{get:function(){var b=
a.d.position;return{x:b.x,y:b.y,z:b.z}},enumerable:e});Object.defineProperty(this,"zNear",{get:function(){return a.J},enumerable:e});Object.defineProperty(this,"zFar",{get:function(){return this.P},enumerable:e})};z.prototype.Tc=function(){this.pa=this.ob=this.pb=e;var a=this.d.up;a.x=0;a.y=-1;a.z=0;this.fa();this.k();var b=this;f.addEventListener("scroll",function(){b.oa()},m);f.addEventListener("resize",function(){b.fa()},m);this.D=e};z.prototype.oa=function(){this.pb=e};z.prototype.fa=function(){this.ob=
e;this.oa()};z.prototype.$=function(a,b){this.J=a;this.P=b;this.Nb();this.pa=e;this.k()};z.prototype.k=function(){if(this.ob){var a=this.Ib.style,b=parseInt(a.width,10),a=parseInt(a.height,10);this.Cb=b/a;var c=this.Vb||30;this.Ub=b>a?c/this.Cb:c;b=Math.tan(this.Ub/360*Math.PI);this.Ed=a/2/b;this.Nb();this.d.position.z=this.Ed;this.d.scale.x=-1;this.ob=m;this.pa=this.D=e}this.pb&&(a=this.Ib.style,b=parseInt(a.width,10),a=parseInt(a.height,10),c=this.d.position,c.x=b/2+f.pageXOffset,c.y=a/2+f.pageYOffset,
this.d.lookAt(new THREE.Vector3(c.x,c.y,0)),this.pb=m,this.pa=this.D=e);this.pa&&(this.d.updateMatrixWorld(e),b=new THREE.Matrix4,b.getInverse(this.d.matrixWorld),this.bb.setFromMatrix((new THREE.Matrix4).multiplyMatrices(this.d.projectionMatrix,b)),this.pa=m)};z.prototype.d=h;z.prototype.bb=h;z.prototype.D=m;Q.prototype=new ha;Q.prototype.Rb=function(a,b){for(var c=this.f.U.xa.o,d=0,g=c.length;d<g;++d){var k=c[d],l=k.i,f=this.uc.intersectObject(k.ma,e);if(!(0>=f.length)){var n=f[0],f=n.distance,
n=n.point;if(!(0>=f||f>=a.Ba)){var q=this.n.a;if(!q.belowLayer||!(0>n.z&&k.q.below&&q.stencils&&l.viewType!==l.stencilViewType&&-1===b.indexOf(l)))a.Ba=f,a.wa=k,a.rb=n}}}return a};Q.prototype.Sb=function(a,b){for(var c=this.f.V.xa.o,d=0,g=c.length;d<g;++d){var k=c[d],l=k.i,f=k.ma,n=this.n.a;if(!n.aboveLayer||!l.view.above)if(f=this.Eb.intersectObject(f,e),!(0>=f.length)){var q=f[0],f=q.point,q=q.distance;if(!(0<=f.z)&&!(0>=q||q>=a.Ba))if(!n.stencils||!(l.viewType!==l.stencilViewType&&-1===b.indexOf(l)))a.Ba=
q,a.wa=k,a.rb=f}}return a};Q.prototype.Tb=function(){for(var a=[],b=this.f.ca.xa.o,c=0,d=b.length;c<d;++c){var g=b[c],k=g.ma,f=g.i;f.viewType!==f.stencilViewType&&g.q.below&&-1===b.indexOf(f)&&0<this.Eb.intersectObject(k,e).length&&a.push(f)}return a};Q.prototype.Pa=function(){var a={Ba:Number.MAX_VALUE,wa:h,rb:h},b=this.n.a,c=b.belowLayer,d=b.aboveLayer;c&&d?(b=b.stencils?this.Tb():[],a=this.Rb(a,b),a=this.Sb(a,b)):d?a=this.Rb(a,[]):c&&(b=this.Tb(),a=this.Sb(a,b));b=a.rb;return{wa:a.wa,Nc:b?b.x:
Number.MAX_VALUE,Oc:b?b.y:Number.MAX_VALUE,Pc:b?b.z:Number.MAX_VALUE}};Q.prototype.vb=function(a){var b=this.f.Ab,c=2*(a.x/b.width)-1;a=2*-(a.y/b.height)+1;this.n.a.aboveLayer&&(b=this.f.U.d.d,this.ya=new THREE.Vector3(c,a,1),this.nc.unprojectVector(this.ya,b),this.ya=this.ya.sub(b.position).normalize(),this.uc=new THREE.Raycaster(b.position,this.ya));this.n.a.belowLayer&&(b=this.f.V.d.d,this.za=new THREE.Vector3(c,a,1),this.nc.unprojectVector(this.za,b),this.za=this.za.sub(b.position).normalize(),
this.Eb=new THREE.Raycaster(b.position,this.za))};D.prototype=new A;D.prototype.add=function(a){a.addedToVoodooTriggers?a.visible=e:this.j.add(a);a.addedToVoodooScene=e;this.na.push(a);this.Yb(a)&&this.la.push(a);this.H=e;var b=new f.voodoo.Event("add");b.object=a;this.e.u(this.q,b)};D.prototype.off=function(a,b){this.e.lb(a,b)};D.prototype.on=function(a,b){this.e.mb(a,b)};D.prototype.remove=function(a){var b=new f.voodoo.Event("remove");b.object=a;this.e.u(this.q,b);a.addedToVoodooTriggers?a.visible=
m:this.j.remove(a);a.addedToVoodooScene=m;b=this.na.indexOf(a);-1!==b&&this.na.splice(b,1);this.Yb(a)&&(b=this.la.indexOf(a),-1!==b&&this.la.splice(b,1));this.Za=e};D.prototype.Db=function(a,b,c,d){var g="undefined"!==typeof b?b:e,k="undefined"!==typeof c?c:e,l="undefined"!==typeof d?d:e;this.ua!==h&&this.detach();var n=f.voodoo.Event,r=this;a&&(this.ua=this.aa.yd(a,function(b,c,d,f,p,u){var t=r.j,s=t.position,t=t.scale;g?(s.x=b+d/2,s.y=c+f/2):(s.x=b,s.y=c);k?t.x=t.y=1:(t.x=d,t.y=f);t.z=l?(t.x+t.y)/
2:1;r.j.updateMatrixWorld(e);r.H=e;p&&(p=new n("move"),p.object=a,s=p.page,s.x=b,s.y=c,s=p.size,s.x=d,s.y=f,r.e.u(h,p));u&&(p=new n("resize"),p.object=a,s=p.page,s.x=b,s.y=c,s=p.size,s.x=d,s.y=f,r.e.u(h,p))}),b=new n("attach"),b.object=a,this.e.u(this.q,b))};D.prototype.m=function(){this.c.remove(this.j);this.c.__objectsRemoved=[];this.ua!==h&&this.Ya();this.e.m();this.j=this.q=this.c=this.e=h};D.prototype.Ya=function(){var a=new f.voodoo.Event("detach");this.e.u(h,a);this.aa.ed(this.ua);this.ua=
h;var a=this.j.position,b=this.j.scale;a.x=a.y=0;b.x=b.y=1;this.j.updateMatrixWorld(e)};D.prototype.fc=function(a){var b=this.j.position,c=this.j.scale;return"undefined"!==typeof a.x?{x:a.x*c.x+b.x,y:a.y*c.y+b.y,z:a.z*c.z+b.z}:[a[0]*c.x+b.x,a[1]*c.y+b.y,a[2]*c.z+b.z]};D.prototype.jc=function(a){var b=this.j.position,c=this.j.scale;return"undefined"!==typeof a.x?{x:(a.x-b.x)/c.x,y:(a.y-b.y)/c.y,z:(a.z-b.z)/c.z}:[(a[0]-b.x)/c.x,(a[1]-b.y)/c.y,(a[2]-b.z)/c.z]};D.prototype.Yb=function(a){return a instanceof
THREE.Mesh||a instanceof THREE.MorphAnimMesh||a instanceof THREE.SkinnedMesh||a instanceof THREE.Line};K.prototype=new Y;K.prototype.Ob=function(a){return new D(this.c,a)};K.prototype.c=h;ba.prototype=new V;ba.prototype.add=function(a,b){var c=new P(this.q,a,this,b);this.o.push(c);a.addedToVoodooScene||(a.visible=m,this.c.add(a));a.addedToVoodooTriggers=e};ba.prototype.remove=function(a){for(var b=0,c=this.o.length;b<c;++b)this.o[b].ma===a&&this.o.splice(b,1);a.addedToVoodooScene&&this.c.remove(a);
a.addedToVoodooTriggers=m};ba.prototype.m=function(){this.q=this.c=this.o=h};R.prototype=new ga;R.prototype.Pb=function(a){return new ba(this.o,a.scene.c,a)};r.prototype=new C;r.prototype.Va=function(a){var b=this.a;a?(b.aboveLayer&&(this.Q.style.pointerEvents="auto"),b.belowLayer&&(this.K.style.pointerEvents="auto"),b.seamLayer&&(this.N.style.pointerEvents="auto")):(b.aboveLayer&&(this.Q.style.pointerEvents="none"),b.belowLayer&&(this.K.style.pointerEvents="none"),b.seamLayer&&(this.N.style.pointerEvents=
"none"))};r.prototype.Hc=function(){this.Ua=1;var a=this.a,b=a.aboveLayer,c=a.belowLayer,d={antialias:a.antialias,alpha:e};b&&(this.ba=new THREE.WebGLRenderer(d),this.Q=this.ba.domElement,this.wb(this.ba),this.Q.style.zIndex=a.aboveZIndex);c&&(this.t=new THREE.WebGLRenderer(d),this.K=this.t.domElement,this.wb(this.t),this.K.style.zIndex=a.belowZIndex);d=b&&this.ba.context.getContextAttributes().antialias||c&&this.t.context.getContextAttributes().antialias;a.antialias?d||y.p("Antialiasing requested but not supported."):
a.seamLayer=m;if(!b||!c)a.seamLayer=m;a.seamLayer&&(this.F=new THREE.WebGLRenderer({antialias:m,alpha:e}),this.N=this.F.domElement,this.wb(this.F),this.N.style.zIndex=a.seamZIndex);this.fa(m);this.oa(m)};r.prototype.Ic=function(){var a=this.a,b=a.renderer,c=a.fov,d=a.J,g=a.P;a.aboveLayer&&(this.A=new z(this.Q,c,d,g),this.Bb=new K,this.vc=new R,this.tc=new M,this.U=new w(H.Above,b,this.A,this.Bb,this.vc,this.tc),this.Y.push(this.U));a.belowLayer&&(this.B=new z(this.K,c,d,g),this.Fb=new K,this.Dc=new R,
this.Ac=new M,this.V=new w(H.Below,b,this.B,this.Fb,this.Dc,this.Ac),this.Y.push(this.V),a.stencils&&(this.v=new z(this.K,c,d,g),this.Gb=new K,this.Cc=new R,this.Bc=new M,this.ca=new w(H.BelowStencil,b,this.v,this.Gb,this.Cc,this.Bc),this.Y.push(this.ca)));a.seamLayer&&(this.s=new z(this.N,c,d,g),this.tb=new K,this.ud=new R,this.qd=new M,this.ra=new w(H.Seam,b,this.s,this.tb,this.ud,this.qd),this.Y.push(this.ra),a.stencils&&(this.v||(this.v=new z(this.N,c,d,g)),this.qc=new K,this.td=new R,this.sd=
new M,this.sa=new w(H.SeamStencil,b,this.v,this.qc,this.td,this.sd),this.Y.push(this.sa)));this.qb=m;this.sc();var k=this;f.addEventListener("resize",function(){k.qb=e},m)};r.prototype.m=function(){var a=this.a,b=t.body;a.aboveLayer&&b.removeChild(this.Q);a.belowLayer&&b.removeChild(this.K);a.seamLayer&&b.removeChild(this.N);a.performanceScaling&&this.da.m();this.hd()};r.prototype.Sc=function(){var a=t.body.style;this.md=a.width;this.kd=a.height;a.width="100%";a.height="100%";this.ld=a.margin;a.margin=
"0px"};r.prototype.W=function(a){return this.H?e:!a?m:a.W()};r.prototype.ic=function(){this.fb=new Date};r.prototype.fa=function(a){function b(a,b){a.setViewport(0,0,n,p);var c=b.style;c.width=g;c.height=k;b.width=n;b.height=p}this.Cd();var c=this.Ab,d=c.width,c=c.height,g=d+"px",k=c+"px",l=f.devicePixelRatio||1,n=d*l*this.Ua,p=c*l*this.Ua,d=this.a;d.aboveLayer&&b(this.ba,this.Q);d.belowLayer&&b(this.t,this.K);d.seamLayer&&b(this.F,this.N);c=t.body.style;c.display="none";c.display="block";this.H=
e;d.realtime&&a&&this.T()};r.prototype.oa=function(a){this.xb=f.pageXOffset+"px";this.yb=f.pageYOffset+"px";this.H=e;this.a.realtime&&a&&this.T()};r.prototype.cd=function(){var a=this;f.addEventListener("scroll",function(){a.oa.call(a,e)},m);f.addEventListener("resize",function(){a.fa.call(a,e)},m)};r.prototype.T=function(){var a;a=m;var b=this.a,c=b.aboveLayer,d=b.belowLayer,g=b.seamLayer,f=b.stencils,l=b.performanceScaling;this.Bd();l&&(this.da.Mc(),l&&!this.lc&&(this.da.ab>b.ad||0===this.n.S?this.fb=
new Date:(new Date-this.fb)/1E3>b.bd&&(this.Ua=0.5,this.lc=e,this.fa(m))));if(d&&(this.W(this.V)||this.W(this.ca)))f?(a=this.t.context,a.enable(a.STENCIL_TEST),a.clearStencil(0),a.stencilOp(a.REPLACE,a.REPLACE,a.REPLACE),a.stencilFunc(a.NEVER,1,4294967295),this.t.autoClear=m,this.t.clear(),this.t.render(this.Gb.c,this.v.d),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),a.stencilFunc(a.EQUAL,1,4294967295)):(a=this.t.context,a.disable(a.STENCIL_TEST),this.t.autoClear=e),this.t.render(this.Fb.c,this.B.d),a=e;c&&
this.W(this.U)&&(this.ba.render(this.Bb.c,this.A.d),a=e);if(g&&(this.W(this.ra)||this.W(this.sa)))a=b.rd,d=this.s.position.z,c=d-a,g=d+a,a=this.F.context,a.enable(a.STENCIL_TEST),this.F.autoClear=m,this.F.clear(),f?(a.clearStencil(1),a.stencilOp(a.REPLACE,a.REPLACE,a.REPLACE),a.stencilFunc(a.NEVER,0,4294967295),this.F.render(this.qc.c,this.v.d),this.s.$(c,d),this.F.render(this.tb.c,this.s.d)):a.clearStencil(0),f=this.tb.c,d=this.s.d,a.stencilOp(a.REPLACE,a.REPLACE,a.REPLACE),a.stencilFunc(a.NEVER,
1,4294967295),this.s.$(b.J,c),this.F.render(f,d),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),a.stencilFunc(a.NOTEQUAL,1,4294967295),this.s.$(c,g),this.F.render(f,d),a=e;b.aboveLayer&&(this.ba.context.finish(),f=this.Q.style,f.left=this.xb,f.top=this.yb);b.belowLayer&&(this.t.context.finish(),f=this.K.style,f.left=this.xb,f.top=this.yb);b.seamLayer&&(this.F.context.finish(),b=this.N.style,b.left=this.xb,b.top=this.yb);this.H=m;this.U&&this.U.ia();this.V&&this.V.ia();this.ca&&this.ca.ia();this.ra&&this.ra.ia();
this.sa&&this.sa.ia();a&&this.da&&this.da.T()};r.prototype.hd=function(){var a=t.body.style;a.width=this.md;a.height=this.kd;a.margin=this.ld};r.prototype.ub=function(a){var b=this.a;b.aboveLayer&&(this.Q.style.cursor=a);b.belowLayer&&(this.K.style.cursor=a);b.seamLayer&&(this.N.style.cursor=a)};r.prototype.wb=function(a){var b=a.domElement,c=b.style;a.setFaceCulling(THREE.CullFaceFront,THREE.FrontFaceDirectionCCW);c.position="absolute";c.pointerEvents="none";t.body.appendChild(b)};r.prototype.Bd=
function(){this.A&&this.A.k();this.B&&this.B.k();this.s&&this.s.k();this.v&&this.v.k();this.qb&&(this.sc(),this.qb=m);if(this.A&&this.A.D||this.B&&this.B.D||this.s&&this.s.D||this.v&&this.v.D){for(var a=this.n.I,b=new f.voodoo.Event("cameramove"),c=0,d=a.length;c<d;++c)a[c].dispatch(b);this.A&&(this.A.D=m);this.B&&(this.B.D=m);this.s&&(this.s.D=m);this.v&&(this.v.D=m)}};r.prototype.sc=function(){var a=this.a,b=a.aboveLayer,c=a.belowLayer;if(c)if(b){var d=this.B.position.z;this.B.$(d-0.5,a.P)}else this.B.$(a.J,
a.P);b&&(c?(d=this.A.position.z,this.A.$(a.J,d)):this.A.$(a.J,a.P))};r.prototype.Cd=function(){var a=t.createElement("div"),b=t.documentElement;a.style.cssText="position: fixed; top: 0; left: 0; bottom: 0; right: 0;";b.insertBefore(a,b.firstChild);this.Ab=new I(a.offsetWidth,a.offsetHeight);b.removeChild(a)};r.prototype.Y=h;s.prototype.destroy=function(){this.e.u(h,new f.voodoo.Event("destroy"));-1!==this.Ta&&f.clearInterval(this.Ta);-1!==this.Ra&&f.clearInterval(this.Ra);for(-1!==this.Qa&&f.cancelAnimationFrame(this.Qa);0<
this.I.length;)this.I[0].destroy();this.I=h;this.f.m();this.La.m();this.e.m();"undefined"!==typeof f.voodoo.engine&&delete f.voodoo.engine;this.I=this.e=this.La=this.f=h;this.Qa=this.Ra=this.Ta=-1;this.aa=this.gb=this.a=h;ca=0};s.prototype.frame=function(){this.k();this.f.T()};s.prototype.off=function(a,b){this.e.lb(a,b)};s.prototype.on=function(a,b){this.e.mb(a,b)};s.prototype.models=h;s.prototype.yc=function(a){this.I.push(a);this.e.u(h,new f.voodoo.Event("addmodel",a))};s.prototype.Wb=function(){return 0!==
this.S};s.prototype.fd=function(a){this.I.splice(this.I.indexOf(a),1);this.e.u(h,new f.voodoo.Event("removemodel",a));this.f.H=e};s.prototype.oc=function(a,b){var c=this;this.Qa=requestAnimationFrame(function(){c.oc(a,b)});this.Wb()&&(a&&this.k(),b&&this.f.T())};s.prototype.vd=function(){var a=this;this.ka=this.Ea=this.S=0;f.addEventListener("focus",function(){a.S=0;a.ka=setTimeout(function(){a.S=Date.now();a.ka=0;a.f.ic()},a.a.wd)},m);f.addEventListener("blur",function(){a.S=0;0!==a.ka&&(clearTimeout(a.ka),
a.ka=0)},m);setTimeout(function(){if(!t.hasFocus||t.hasFocus())a.S=Date.now()},a.a.xd)};s.prototype.k=function(){var a=0,b=Date.now();this.Wb()&&(a=(b-this.S)/1E3,this.S=b);a>2*this.Ea?(b=this.Ea,this.Ea=a,a=b):this.Ea=a;this.aa.k();for(var b=this.I,c=0,d=b.length;c<d;++c)b[c].update(a);this.La.k()};s.prototype.Dd=function(){!this.a.aboveLayer&&!this.a.belowLayer&&y.p("At least one layer must be enabled.","(Engine::validateOptions_)")};s.prototype.La=h;s.prototype.gb=h;s.prototype.a=h;s.prototype.qa=
h;s.prototype.f=h;this.engine=s.prototype.aa=h;this.Engine=s;this.version=h;n.prototype.aboveLayer=e;n.prototype.aboveZIndex=9999;n.prototype.antialias=e;n.prototype.belowLayer=e;n.prototype.belowZIndex=-1;n.prototype.Kc=500;n.prototype.fov=30;n.prototype.frameLoop=e;n.prototype.performanceScaling=e;n.prototype.ad=45;n.prototype.bd=3;n.prototype.realtime=e;n.prototype.renderer=ia.ThreeJs;n.prototype.renderInterval=0;n.prototype.rd=10;n.prototype.seamLayer=e;n.prototype.seamZIndex=1E4;n.prototype.standardLighting=
e;n.prototype.stencils=e;n.prototype.wd=350;n.prototype.xd=1E3;n.prototype.updateInterval=0;n.prototype.P=1E4;n.prototype.J=0.1;this.Options=n;var T=p.extend();T.prototype.createLight=function(){y.p("createLight_() undefined.");return h};T.prototype.load=function(){this.Ka=this.createLight();this.scene.add(this.Ka)};T.prototype.unload=function(){this.scene.remove(this.Ka)};T.prototype.setColor=function(a){a=f.voodoo.utility.convertCssColorToThreeJsColor(a);this.Ka.color.copy(a)};var W=u.extend();
W.prototype.initialize=function(a){this.Aa=a.color||"white";var b=this;Object.defineProperty(this,"color",{get:function(){return b.Aa},set:function(a){b.view.setColor(a);b.Aa=a}})};W.prototype.setUpViews=function(){this.color=this.Aa?this.Aa:"black"};W.prototype.color=h;W.prototype.stencilViewType=p.extend();var U=T.extend();U.prototype.createLight=function(){return new THREE.AmbientLight};var ja=W.extend();ja.prototype.name="AmbientLight";ja.prototype.viewType=U;U=T.extend();U.prototype.createLight=
function(){return new THREE.PointLight};U.prototype.load=function(){T.prototype.load.apply(this);this.updatePosition()};U.prototype.updatePosition=function(){var a=this.Ka.position,b=this.camera.position;a.x=b.x;a.y=b.y;a.z=b.z};var fa=W.extend();fa.prototype.name="CameraLight";fa.prototype.viewType=U;fa.prototype.setUpViews=function(){this.on("cameramove",function(){this.view.updatePosition()})}}for(var B=["voodoo"],I=f,J=0;J<B.length-1;++J)I=I[B[J]];if(I[B[B.length-1]]){var J=I[B[B.length-1]],ca=
new Y,X;for(X in ca)J[X]=ca[X]}else I[B[B.length-1]]=new Y;I[B[B.length-1]].version="0.9.1.min"})(window,document,void 0);
